---
layout: single
title: "Chapter9. 함수와 변수(2)"
---

# 연결(linkage)

+ 다른 범위에 속하는 변수들을 서로 연결하는 것   
+ 지역 변수는 연결을 가지지 X, 전역 변수들만 연결을 가질 수 있음   
+ 연결의 종류   
  + 무연결(no linkage): 지역 변수로서 외부와 연결을 가지지 않는다.   
  + 외부 연결(external linkage): 전역 변수로서 여러 개의 소스 파일에 걸쳐서 사용된다.   
  + 내부 연결(internal linkage): 전역 변수로서 하나의 소스 파일에만 사용이 가능하다.   

# 외부 연결

+ 하나의 프로그램은 여러 개의 소스 파일로 이루어진다.   
+ 전역 변수를 사용하는 것은 좋지 않다고 이야기 한 바가 있지만, 하나의 전역 변수를 여러 개의 소스 파일에 걸쳐서 공유해야 하는 경우도 발생한다.   
+ 보통 하나의 파일에서 전역 변수를 선언 & 다른 파일에서는 extern 지정자로 변수를 참조 (변수 초기화는 변수가 정의된 파일에서만 가능)   
+ extern 키워드를 사용하지 않으면? 전역 변수가 외부 연결 가능해도 다른 소스 파일에서 참조할 수 없다.   
+ 하나의 전역 변수를 모든 소스 파일에서 공유하려면 extern 파일 선언을 하나의 헤더 파일에 두고, 이 헤더 파일을 모든 소스 파일에서 포함시킨다.   

# 내부 연결

+ 전역 변수 앞에 static을 붙인다.
+ 하나의 소스 파일 안에서만 사용 가능   
+ static이 붙지 않으면 다른 소스 파일에서도 이 전역 변수를 사용 가능   

# 함수 이름 앞에 static이 붙는 경우

+ 함수 이름 앞에 static이 붙어 있으면, 이 함수는 소스 파일 안에서만 사용 가능하다. -> 내부 연결, 정적 함수   
+ 함수 이름 앞에 static이 없으면, 변수와 마찬가지로 다른 소스 파일에서 extern으로 선언하여 사용할 수 있다.   

# 변수 저장 유형 요약

저장 유형 / 키워드 / 정의되는 위치 / 범위 / 생존 시간   
자동 / auto / 함수 내부 / 지역 / 임시   
레지스터 / register / 함수 내부 / 지역 / 임시   
정적 지역 / static / 함수 내부 / 지역 / 영구   
전역 / 없음 / 함수 외부 / 모든 소스 파일 / 영구   
정적 전역 / static / 함수 외부 / 하나의 소스 파일 / 영구   
외부 참조 / extern / 함수 외부 / 모든 소스 파일 / 영구   

+ 자동 저장 유형 -> 메모리의 효율적 사용, 함수나 블록을 독립적으로 설계하여 디버깅과 유지 보수가 편리   
+ 자동 저장 유형 중 자주 사용되는 변수는 레지스터 유형이 좋음   
+ 함수 호출이 끝나도 그 값을 유지하여야 할 필요가 있다면 -> 지역 정적   
+ 많은 함수에서 공유되어야 하는 변수 -> 외부 변수   
+ 많은 소스 파일에서 공유되어야 하는 변수 -> 외부 참조 변수   

# 나만 사용하고 다른 사람은 사용하지 못하는 전역 변수 만들기

+ C언어에서는 근본적으로 불가능   
+ 비슷한 효과를 내는 방법 -> '_index'와 같이 밑줄 문자(_)를 사용하여 전역 변수를 만든다. (다른 프로그래머들은 이런 식으로 변수를 작성하지 않기 때문)   
